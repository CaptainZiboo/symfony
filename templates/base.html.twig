<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>{% block title %}Welcome!{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>⚫️</text><text y=%221.3em%22 x=%220.2em%22 font-size=%2276%22 fill=%22%23fff%22>sf</text></svg>">
        {% block stylesheets %}
        {% endblock %}

        {% block javascripts %}
        {% endblock %}
    </head>
    <body>
        {% if app.user and not app.user.isActive() %}
            <div class="alert alert-danger" style="margin: 1rem 0;">
                Votre compte est désactivé. Certaines fonctionnalités sont inaccessibles.
            </div>
        {% endif %}

        <a href="/" class="btn btn-secondary" style="margin: 1rem 0; display: inline-block;">Retour au menu</a>

       {% set last_flash = null %}
            {% for label, messages in app.flashes %}
                {% for message in messages %}
                    {% set last_flash = {'label': label, 'message': message} %}
                {% endfor %}
            {% endfor %}

            {% if last_flash %}
                <div id="toast-flash"
                    class="alert alert-{{ last_flash.label == 'success' ? 'success' : (last_flash.label == 'error' ? 'danger' : 'info') }}"
                    style="position: fixed; top: 20px; right: 20px; min-width: 200px; z-index: 9999;">
                    {{ last_flash.message }}
                </div>
                <script>
                    setTimeout(function() {
                        var toast = document.getElementById('toast-flash');
                        if (toast) {
                            toast.style.display = 'none';
                        }
                    }, 3000); // 3 secondes
                </script>
            {% endif %}

        {% block body %}{% endblock %}
    </body>
</html>
